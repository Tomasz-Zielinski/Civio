!function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e,i){var r;!function(){"use strict";var n=.5*(Math.sqrt(3)-1),o=(3-Math.sqrt(3))/6,s=1/6,a=(Math.sqrt(5)-1)/4,h=(5-Math.sqrt(5))/20;function p(t){var e;e="function"==typeof t?t:t?function(){var t=0,e=0,i=0,r=1,n=function(){var t=4022871197;return function(e){e=e.toString();for(var i=0;i<e.length;i++){var r=.02519603282416938*(t+=e.charCodeAt(i));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)}}();t=n(" "),e=n(" "),i=n(" ");for(var o=0;o<arguments.length;o++)(t-=n(arguments[o]))<0&&(t+=1),(e-=n(arguments[o]))<0&&(e+=1),(i-=n(arguments[o]))<0&&(i+=1);return n=null,function(){var n=2091639*t+2.3283064365386963e-10*r;return t=e,e=i,i=n-(r=0|n)}}(t):Math.random,this.p=c(e),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var i=0;i<512;i++)this.perm[i]=this.p[255&i],this.permMod12[i]=this.perm[i]%12}function c(t){var e,i=new Uint8Array(256);for(e=0;e<256;e++)i[e]=e;for(e=0;e<255;e++){var r=e+~~(t()*(256-e)),n=i[e];i[e]=i[r],i[r]=n}return i}p.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(t,e){var i,r,s=this.permMod12,a=this.perm,h=this.grad3,p=0,c=0,d=0,l=(t+e)*n,m=Math.floor(t+l),u=Math.floor(e+l),w=(m+u)*o,y=t-(m-w),f=e-(u-w);y>f?(i=1,r=0):(i=0,r=1);var v=y-i+o,E=f-r+o,g=y-1+2*o,x=f-1+2*o,H=255&m,T=255&u,M=.5-y*y-f*f;if(M>=0){var R=3*s[H+a[T]];p=(M*=M)*M*(h[R]*y+h[R+1]*f)}var b=.5-v*v-E*E;if(b>=0){var W=3*s[H+i+a[T+r]];c=(b*=b)*b*(h[W]*v+h[W+1]*E)}var A=.5-g*g-x*x;if(A>=0){var S=3*s[H+1+a[T+1]];d=(A*=A)*A*(h[S]*g+h[S+1]*x)}return 70*(p+c+d)},noise3D:function(t,e,i){var r,n,o,a,h,p,c,d,l,m,u=this.permMod12,w=this.perm,y=this.grad3,f=(t+e+i)*(1/3),v=Math.floor(t+f),E=Math.floor(e+f),g=Math.floor(i+f),x=(v+E+g)*s,H=t-(v-x),T=e-(E-x),M=i-(g-x);H>=T?T>=M?(h=1,p=0,c=0,d=1,l=1,m=0):H>=M?(h=1,p=0,c=0,d=1,l=0,m=1):(h=0,p=0,c=1,d=1,l=0,m=1):T<M?(h=0,p=0,c=1,d=0,l=1,m=1):H<M?(h=0,p=1,c=0,d=0,l=1,m=1):(h=0,p=1,c=0,d=1,l=1,m=0);var R=H-h+s,b=T-p+s,W=M-c+s,A=H-d+2*s,S=T-l+2*s,L=M-m+2*s,C=H-1+.5,z=T-1+.5,P=M-1+.5,k=255&v,j=255&E,D=255&g,O=.6-H*H-T*T-M*M;if(O<0)r=0;else{var U=3*u[k+w[j+w[D]]];r=(O*=O)*O*(y[U]*H+y[U+1]*T+y[U+2]*M)}var _=.6-R*R-b*b-W*W;if(_<0)n=0;else{var I=3*u[k+h+w[j+p+w[D+c]]];n=(_*=_)*_*(y[I]*R+y[I+1]*b+y[I+2]*W)}var q=.6-A*A-S*S-L*L;if(q<0)o=0;else{var F=3*u[k+d+w[j+l+w[D+m]]];o=(q*=q)*q*(y[F]*A+y[F+1]*S+y[F+2]*L)}var B=.6-C*C-z*z-P*P;if(B<0)a=0;else{var G=3*u[k+1+w[j+1+w[D+1]]];a=(B*=B)*B*(y[G]*C+y[G+1]*z+y[G+2]*P)}return 32*(r+n+o+a)},noise4D:function(t,e,i,r){var n,o,s,p,c,d,l,m,u,w,y,f,v,E,g,x,H,T=this.perm,M=this.grad4,R=(t+e+i+r)*a,b=Math.floor(t+R),W=Math.floor(e+R),A=Math.floor(i+R),S=Math.floor(r+R),L=(b+W+A+S)*h,C=t-(b-L),z=e-(W-L),P=i-(A-L),k=r-(S-L),j=0,D=0,O=0,U=0;C>z?j++:D++,C>P?j++:O++,C>k?j++:U++,z>P?D++:O++,z>k?D++:U++,P>k?O++:U++;var _=C-(d=j>=3?1:0)+h,I=z-(l=D>=3?1:0)+h,q=P-(m=O>=3?1:0)+h,F=k-(u=U>=3?1:0)+h,B=C-(w=j>=2?1:0)+2*h,G=z-(y=D>=2?1:0)+2*h,K=P-(f=O>=2?1:0)+2*h,V=k-(v=U>=2?1:0)+2*h,X=C-(E=j>=1?1:0)+3*h,Y=z-(g=D>=1?1:0)+3*h,Z=P-(x=O>=1?1:0)+3*h,N=k-(H=U>=1?1:0)+3*h,$=C-1+4*h,J=z-1+4*h,Q=P-1+4*h,tt=k-1+4*h,et=255&b,it=255&W,rt=255&A,nt=255&S,ot=.6-C*C-z*z-P*P-k*k;if(ot<0)n=0;else{var st=T[et+T[it+T[rt+T[nt]]]]%32*4;n=(ot*=ot)*ot*(M[st]*C+M[st+1]*z+M[st+2]*P+M[st+3]*k)}var at=.6-_*_-I*I-q*q-F*F;if(at<0)o=0;else{var ht=T[et+d+T[it+l+T[rt+m+T[nt+u]]]]%32*4;o=(at*=at)*at*(M[ht]*_+M[ht+1]*I+M[ht+2]*q+M[ht+3]*F)}var pt=.6-B*B-G*G-K*K-V*V;if(pt<0)s=0;else{var ct=T[et+w+T[it+y+T[rt+f+T[nt+v]]]]%32*4;s=(pt*=pt)*pt*(M[ct]*B+M[ct+1]*G+M[ct+2]*K+M[ct+3]*V)}var dt=.6-X*X-Y*Y-Z*Z-N*N;if(dt<0)p=0;else{var lt=T[et+E+T[it+g+T[rt+x+T[nt+H]]]]%32*4;p=(dt*=dt)*dt*(M[lt]*X+M[lt+1]*Y+M[lt+2]*Z+M[lt+3]*N)}var mt=.6-$*$-J*J-Q*Q-tt*tt;if(mt<0)c=0;else{var ut=T[et+1+T[it+1+T[rt+1+T[nt+1]]]]%32*4;c=(mt*=mt)*mt*(M[ut]*$+M[ut+1]*J+M[ut+2]*Q+M[ut+3]*tt)}return 27*(n+o+s+p+c)}},p._buildPermutationTable=c,void 0===(r=function(){return p}.call(e,i,e,t))||(t.exports=r),e.SimplexNoise=p,t.exports=p}()},function(t,e,i){"use strict";i.r(e);class r{constructor(t){this.constructor(t)}}r.prototype.constructor=function(t){this.world=t,this.keys=[],this.cameraSpeed=2,this.zoom=5,this.zoomInLimit=50,this.zoomOutLimit=250},r.prototype.updateCamera=function(){this.keys[37]&&(this.world.camera.position.x+=this.cameraSpeed),this.keys[38]&&(this.world.camera.position.z+=this.cameraSpeed),this.keys[39]&&(this.world.camera.position.x-=this.cameraSpeed),this.keys[40]&&(this.world.camera.position.z-=this.cameraSpeed)},r.prototype.onWheel=function(t){let e=this.world.camera.clone().getWorldDirection(new THREE.Vector3).multiplyScalar(this.zoom);if(t.deltaY>0){if(this.world.camera.position.y-e.y>this.zoomOutLimit)return;this.world.camera.translateZ(this.zoom)}else{if(this.world.camera.position.y+e.y<this.zoomInLimit)return;this.world.camera.translateZ(-this.zoom)}},r.prototype.onKeyUp=function(t){this.keys[t.keyCode]=!1},r.prototype.onKeyDown=function(t){this.keys[t.keyCode]=!0},r.prototype.onMouseUp=function(t){},r.prototype.onMouseDown=function(t,e){t.which},r.prototype.onMouseMove=function(t){this.world.mouse.x=t.clientX/window.innerWidth*2-1,this.world.mouse.y=-t.clientY/window.innerHeight*2+1},r.prototype.onWindowResize=function(){this.world.camera.aspect=window.innerWidth/window.innerHeight,this.world.camera.updateProjectionMatrix(),this.world.renderer.setSize(window.innerWidth,window.innerHeight)};var n=r;class o{constructor(t){this.constructor(t)}}o.prototype.constructor=function(t){var e=document.createElement("canvas"),i=e.getContext("2d");i.font="Bold 18px Arial";i.measureText(t).width;var r=t.split("\n");i.fillStyle="rgba(0, 0, 0, 1.0)";for(var n=0;n<r.length;n++)i.fillText(r[n],8,18*(n+1)+4);var o=new THREE.Texture(e);o.needsUpdate=!0;var s=new THREE.SpriteMaterial({map:o}),a=new THREE.Sprite(s);a.scale.set(100,50,1),this.mesh=a},o.prototype.roundRect=function(t,e,i,r,n,o){t.beginPath(),t.moveTo(e,i),t.lineTo(e+r,i),t.lineTo(e+r,i+n),t.lineTo(e,i+n),t.lineTo(e,i),t.closePath(),t.fill(),t.stroke()};class s{constructor(t){this.constructor(t)}}s.prototype.constructor=function(t){this.mesh=new THREE.Sprite(new THREE.SpriteMaterial({map:t.load("./assets/sprites/copper.png")})),this.mesh.position.x+=5,this.mesh.position.y+=1,this.mesh.scale.set(5,5,5)};var a=s;class h{constructor(t,e){this.constructor(t,e)}}h.prototype.constructor=function(t,e){this.mesh=new THREE.Mesh(t,e)},h.prototype.addSprite=function(t,e){let i=new a(new THREE.TextureLoader);i.mesh.position.x=this.mesh.position.x+e,i.mesh.position.z=this.mesh.position.z+t/2,this.mesh.parent.add(i.mesh)};var p=h,c=i(0),d=i.n(c);new THREE.Color(3887907),new THREE.Color(8190976),new THREE.Color(15583663),new THREE.Color(12759680),new THREE.Color(7654644),new THREE.Color(2329050);const l=new THREE.Color(1007260),m=new THREE.Color(16775930);class u{constructor(t,e){this.constructor(t,e)}}u.prototype.constructor=function(t,e){this.hexlength=e,this.hexheight=this.hexlength*Math.sin(Math.PI/3)/Math.sin(Math.PI/2),this.hex=new THREE.Shape,this.hex.moveTo(0,0),this.hex.lineTo(-this.hexlength/2,this.hexheight),this.hex.lineTo(0,2*this.hexheight),this.hex.lineTo(this.hexlength,2*this.hexheight),this.hex.lineTo(1.5*this.hexlength,this.hexheight),this.hex.lineTo(this.hexlength,0),this.hex.lineTo(0,0),this.geometry=new THREE.ShapeGeometry(this.hex),this.geometry.rotateX(-Math.PI/2),this.geometry.rotateY(-Math.PI/2),this.mapWidth=40,this.mapHeight=40,this.simplex=new d.a,this.mesh=new THREE.Group,this.mapArray=Array(this.mapHeight+1).fill().map(()=>Array(this.mapWidth+1).fill(0)),this.layer1(),this.layer2(),this.layer3(),(new THREE.Box3).setFromObject(this.mesh).getCenter(this.mesh.position).multiplyScalar(-1),this.mapArray[0][1].addSprite(this.hexlength,this.hexheight),t.add(this.mesh)},u.prototype.noise=function(t,e){return this.simplex.noise2D(t,e)/2+.5},u.prototype.layer1=function(){for(var t=0;t<=this.mapHeight;t++)for(var e=0;e<=this.mapWidth;e++){let o=new p(this.geometry,this.material);o.mesh.position.x=-e*this.hexheight*2,o.mesh.position.x+=t%2==0?this.hexheight:0,o.mesh.position.z=-t*this.hexlength*1.5,o.mesh.userData={x:e,y:t},this.mapArray[t][e]=o;var i=e/this.mapWidth-.5,r=t/this.mapHeight-.5,n=1*this.noise(1*i,1*r)+.75*this.noise(2*i,2*r)+.33*this.noise(4*i,4*r)+.33*this.noise(8*i,8*r)+.33*this.noise(16*i,16*r)+.5*this.noise(32*i,32*r);n/=3.24,n=Math.floor(100*n);let s=Math.abs(this.mapWidth/2-e)/(.01*this.mapWidth),a=Math.abs(this.mapHeight/2-t)/(.01*this.mapHeight);n<55||s>40||a>40?(o.type="Water",o.mesh.material.color=l):(o.type="Land",o.mesh.position.y=(n-45)/10,o.mesh.material.color=new THREE.Color(`rgb(0%,${n}%,0%)`)),this.mesh.add(o.mesh)}},u.prototype.layer2=function(){for(var t=0;t<=this.mapHeight;t++)for(var e=0;e<=this.mapWidth;e++)0!=t&&t!=this.mapHeight||(this.mapArray[t][e].mesh.material.color=m,this.mapArray[t][e].mesh.position.y=2)},u.prototype.layer3=function(){for(var t=1;t<=this.mapHeight-1;t++)for(var e=1;e<=this.mapWidth-1;e++){var i=0;"Water"!=this.mapArray[t][e].type&&("Water"==this.mapArray[t+1][e].type&&i++,"Water"==this.mapArray[t-1][e].type&&i++,"Water"==this.mapArray[t][e+1].type&&i++,"Water"==this.mapArray[t][e-1].type&&i++,"Water"==this.mapArray[t+1][e-1].type&&i++,"Water"==this.mapArray[t-1][e-1].type&&i++,i>4&&(this.mapArray[t][e].type="Water",this.mapArray[t][e].mesh.material.color=l,this.mapArray[t][e].mesh.position.y=0)),i=0,"Land"!=this.mapArray[t][e].type&&("Land"==this.mapArray[t+1][e].type&&i++,"Land"==this.mapArray[t-1][e].type&&i++,"Land"==this.mapArray[t][e+1].type&&i++,"Land"==this.mapArray[t][e-1].type&&i++,"Land"==this.mapArray[t+1][e-1].type&&i++,"Land"==this.mapArray[t-1][e-1].type&&i++,i>4&&(this.mapArray[t][e].type="Land",this.mapArray[t][e].mesh.material.color=new THREE.Color("rgb(0%,70%,0%)")))}};var w=u;class y{constructor(t){this.constructor(t)}}y.prototype.constructor=function(t){this.world=t,this.scene=new THREE.Scene,this.camera=new THREE.OrthographicCamera(-window.innerWidth/2,window.innerWidth/2,window.innerHeight/2,-window.innerHeight/2,1,10),this.camera.position.z=10;var e=new THREE.SpriteMaterial({map:this.drawText("0")});this.yield=new THREE.Sprite(e),this.yield.center.set(0,1),this.yield.scale.set(250,125,1),this.scene.add(this.yield);e=new THREE.SpriteMaterial({map:this.world.textureloader.load("./assets/sprites/wheat.png")});this.left_bottom=new THREE.Sprite(e),this.left_bottom.center.set(0,0),this.left_bottom.scale.set(175,175,1),this.scene.add(this.left_bottom),this.updateHUD()},y.prototype.onWindowResize=function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.camera.left=-window.innerWidth/2,this.camera.right=window.innerWidth/2,this.camera.top=window.innerHeight/2,this.camera.bottom=-window.innerHeight/2,this.camera.updateProjectionMatrix(),this.updateHUD(),this.renderer.setSize(window.innerWidth,window.innerHeight)},y.prototype.drawText=function(t){var e=document.createElement("canvas"),i=e.getContext("2d");i.font="Bold 72px Verdana";var r=t.split("\n");i.fillStyle="rgba(0, 0, 0, 1.0)";for(var n=0;n<r.length;n++)i.fillText(r[n],18,72);var o=new THREE.Texture(e);return o.needsUpdate=!0,o},y.prototype.updateHUD=function(){this.yield.position.set(-window.innerWidth/2,window.innerHeight/2,1),this.left_bottom.position.set(-window.innerWidth/2,-window.innerHeight/2,1)};var f=y;class v{}v.prototype.init=function(){this.scene=new THREE.Scene,this.textureloader=new THREE.TextureLoader,this.scene.background=this.textureloader.load("./assets/ui/background.png");var t=new THREE.Mesh(new THREE.PlaneGeometry(1193,667,32),new THREE.MeshBasicMaterial({map:this.textureloader.load("./assets/ui/background.png")}));t.rotateX(-Math.PI/2),t.position.y-=100,this.scene.add(t),this.intersected=null,this.renderer=new THREE.WebGLRenderer({canvas:document.querySelector("canvas"),antialias:!0}),this.renderer.shadowMap.enabled=!0,this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.autoClear=!1,this.raycaster=new THREE.Raycaster,this.mouse=new THREE.Vector2,this.map=new w(this.scene,10),this.input=new n(this),this.interface=new f(this),this.camera=new THREE.PerspectiveCamera(40,window.innerWidth/window.innerHeight,1,1e4),this.camera.position.set(0,200,-100),this.camera.lookAt(0,0,0),window.addEventListener("resize",t=>this.input.onWindowResize(t),!1),window.addEventListener("mousemove",t=>this.input.onMouseMove(t),!1),window.addEventListener("keyup",t=>this.input.onKeyUp(t),!1),window.addEventListener("keydown",t=>this.input.onKeyDown(t),!1),window.addEventListener("mousedown",t=>this.input.onMouseDown(t,this.intersected),!1),window.addEventListener("mouseup",t=>this.input.onMouseUp(t),!1),window.addEventListener("wheel",t=>this.input.onWheel(t),{passive:!1})},v.prototype.render=function(){this.raycast(),this.input.updateCamera(),this.renderer.render(this.scene,this.camera),this.renderer.render(this.interface.scene,this.interface.camera)},v.prototype.animate=function(){requestAnimationFrame(()=>this.animate()),this.render()},v.prototype.raycast=function(){this.raycaster.setFromCamera(this.mouse,this.camera);let t=this.raycaster.intersectObjects(this.scene.children);t.length>0?t[0].object!=this.intersected&&(this.intersected=t[0].object):this.intersected=null};var E=new v;E.init(),E.animate()}]);